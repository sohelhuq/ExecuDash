{
  "entities": {
    "AgentProfile": {
      "title": "Agent Profile",
      "description": "Represents an agent in the system.",
      "type": "object",
      "properties": {
        "id": { "type": "string", "description": "Agent's Firebase Auth UID" },
        "name": { "type": "string" },
        "email": { "type": "string", "format": "email" },
        "phone": { "type": "string" },
        "address": { "type": "string" },
        "commissionRate": { "type": "number", "description": "Commission rate as a percentage (e.g., 5 for 5%)" },
        "status": { "type": "string", "enum": ["Active", "Inactive", "Pending"] },
        "joiningDate": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "name", "email", "status", "joiningDate"]
    },
    "Customer": {
      "title": "Customer",
      "description": "Represents a customer registered by an agent.",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "agentId": { "type": "string", "description": "UID of the agent who registered the customer" },
        "name": { "type": "string" },
        "email": { "type": "string", "format": "email" },
        "phone": { "type": "string" },
        "status": { "type": "string", "enum": ["Pending", "Approved", "Rejected"] },
        "registrationDate": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "agentId", "name", "status", "registrationDate"]
    },
    "Commission": {
      "title": "Commission",
      "description": "Represents a commission earned by an agent.",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "agentId": { "type": "string" },
        "customerId": { "type": "string" },
        "transactionAmount": { "type": "number" },
        "commissionAmount": { "type": "number" },
        "date": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "agentId", "transactionAmount", "commissionAmount", "date"]
    },
    "WithdrawalRequest": {
      "title": "Withdrawal Request",
      "description": "Represents a request from an agent to withdraw their earnings.",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "agentId": { "type": "string" },
        "amount": { "type": "number" },
        "status": { "type": "string", "enum": ["Pending", "Approved", "Rejected"] },
        "requestDate": { "type": "string", "format": "date-time" },
        "processedDate": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "agentId", "amount", "status", "requestDate"]
    },
    "ActivityLog": {
        "title": "Activity Log",
        "description": "Records significant actions performed by users.",
        "type": "object",
        "properties": {
            "id": { "type": "string" },
            "actorId": { "type": "string", "description": "UID of the user who performed the action" },
            "action": { "type": "string", "description": "e.g., 'CUSTOMER_APPROVE', 'WITHDRAWAL_REQUEST'" },
            "targetId": { "type": "string", "description": "ID of the entity being acted upon" },
            "timestamp": { "type": "string", "format": "date-time" },
            "details": { "type": "string", "description": "A brief description of the activity." }
        },
        "required": ["id", "actorId", "action", "timestamp"]
    }
  },
  "auth": {
    "providers": ["password"]
  },
  "firestore": {
    "structure": [
      {
        "path": "/agents/{agentId}",
        "definition": {
          "entityName": "AgentProfile",
          "schema": { "$ref": "#/entities/AgentProfile" }
        }
      },
      {
        "path": "/customers/{customerId}",
        "definition": {
          "entityName": "Customer",
          "schema": { "$ref": "#/entities/Customer" }
        }
      },
      {
        "path": "/agents/{agentId}/commissions/{commissionId}",
        "definition": {
          "entityName": "Commission",
          "schema": { "$ref": "#/entities/Commission" }
        }
      },
      {
        "path": "/agents/{agentId}/withdrawals/{withdrawalId}",
        "definition": {
          "entityName": "WithdrawalRequest",
          "schema": { "$ref": "#/entities/WithdrawalRequest" }
        }
      },
      {
        "path": "/activity_logs/{logId}",
        "definition": {
          "entityName": "ActivityLog",
          "schema": { "$ref": "#/entities/ActivityLog" }
        }
      }
    ]
  }
}
